{% load i18n %}

<tbody>
    {% for product in page_obj %}
    <tr class="border-b hover:bg-opacity-50" style="border-color: var(--ion-border-color);">
        <!-- ID -->
        <td class="px-4 py-3 text-sm font-mono" style="color: var(--ion-color-medium);">
            {{ product.id }}
        </td>

        <!-- Image -->
        <td class="px-4 py-3">
            {% if product.image %}
            <img src="{{ product.image.url }}" alt="{{ product.name }}"
                 class="w-12 h-12 object-cover rounded-lg"
                 style="border: 1px solid var(--ion-border-color);">
            {% else %}
            <div class="w-12 h-12 flex items-center justify-center rounded-lg"
                 style="background: var(--ion-color-light); border: 1px solid var(--ion-border-color);">
                <ion-icon name="cube-outline" style="color: var(--ion-color-medium);"></ion-icon>
            </div>
            {% endif %}
        </td>

        <!-- Name -->
        <td class="px-4 py-3 text-sm" style="color: var(--ion-text-color);">
            {{ product.name }}
        </td>

        <!-- SKU -->
        <td class="px-4 py-3 text-sm" style="color: var(--ion-text-color);">
            {{ product.sku }}
        </td>

        <!-- Price -->
        <td class="px-4 py-3 text-sm" style="color: var(--ion-text-color);">
            ${{ product.price|floatformat:2 }}
        </td>

        <!-- Stock -->
        <td class="px-4 py-3 text-sm" style="color: var(--ion-text-color);">
            {% if product.is_low_stock %}
            <span class="px-2 py-1 rounded-full text-xs" style="background: var(--ion-color-warning-tint); color: var(--ion-color-warning-contrast);">
                {{ product.stock }}
            </span>
            {% else %}
            {{ product.stock }}
            {% endif %}
        </td>

        <!-- Actions -->
        <td class="px-4 py-3">
            <div class="flex gap-1 justify-center">
                <ion-button size="large" fill="clear" href="/plugins/inventory/products/{{ product.id }}/" title="{% trans 'Ver' %}">
                    <ion-icon slot="icon-only" name="eye-outline"></ion-icon>
                </ion-button>
                <ion-button size="large" fill="clear" href="/plugins/inventory/products/{{ product.id }}/edit/" title="{% trans 'Editar' %}">
                    <ion-icon slot="icon-only" name="create-outline"></ion-icon>
                </ion-button>
                {% if barcode_enabled %}
                <ion-button size="large" fill="clear"  id="barcode-btn-{{ product.id }}" title="{% trans 'Imprimir CÃ³digo de Barras' %}">
                    <ion-icon slot="icon-only" name="barcode-outline"></ion-icon>
                </ion-button>
                {% endif %}
                <ion-button size="large" fill="clear" color="danger"
                            onclick="confirmDeleteProduct({{ product.id }}, '{{ product.name|escapejs }}', this)"
                            title="{% trans 'Eliminar' %}">
                    <ion-icon slot="icon-only" name="trash-outline"></ion-icon>
                </ion-button>
            </div>
        </td>
    </tr>

    <!-- Barcode Modal for this product -->
    {% if barcode_enabled %}
    {% include "inventory/partials/barcode_modal.html" %}
    {% endif %}

    {% empty %}
    <tr>
        <td colspan="7" class="text-center py-12" style="color: var(--ion-color-medium);">
            <div class="flex flex-col items-center gap-3">
                <ion-icon name="folder-open-outline" style="font-size: 48px;"></ion-icon>
                <span>{% trans "No se encontraron productos" %}</span>
            </div>
        </td>
    </tr>
    {% endfor %}
</tbody>
