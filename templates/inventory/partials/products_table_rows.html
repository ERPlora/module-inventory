{% load i18n %}

<tbody id="products-tbody">
    {% for product in products %}
    <tr>
        {# ID #}
        <td class="mono text-secondary">{{ product.id }}</td>

        {# Image #}
        <td>
            {% if product.image %}
            <img src="{{ product.image.url }}" alt="{{ product.name }}" class="table-image">
            {% else %}
            <div class="table-image-placeholder">
                <ion-icon name="cube-outline"></ion-icon>
            </div>
            {% endif %}
        </td>

        {# Name #}
        <td>{{ product.name }}</td>

        {# SKU #}
        <td class="hide-mobile">{{ product.sku }}</td>

        {# Price #}
        <td class="numeric">${{ product.price|floatformat:2 }}</td>

        {# Stock #}
        <td>
            {% if product.is_low_stock %}
            <span class="table-stock-badge table-stock-badge--low">{{ product.stock }}</span>
            {% else %}
            {{ product.stock }}
            {% endif %}
        </td>

        {# Actions #}
        <td>
            <div class="table-actions">
                <ion-button size="small" fill="clear" href="{% url 'inventory:product_view' pk=product.id %}" title="{% trans 'View' %}">
                    <ion-icon slot="icon-only" name="eye-outline"></ion-icon>
                </ion-button>
                <ion-button size="small" fill="clear" href="{% url 'inventory:product_edit' pk=product.id %}" title="{% trans 'Edit' %}">
                    <ion-icon slot="icon-only" name="create-outline"></ion-icon>
                </ion-button>
                {% if barcode_enabled %}
                <ion-button size="small" fill="clear" id="barcode-btn-{{ product.id }}" title="{% trans 'Print Barcode' %}">
                    <ion-icon slot="icon-only" name="barcode-outline"></ion-icon>
                </ion-button>
                {% endif %}
                <ion-button size="small" fill="clear" color="danger"
                            onclick="confirmDeleteProduct({{ product.id }}, '{{ product.name|escapejs }}', this)"
                            title="{% trans 'Delete' %}">
                    <ion-icon slot="icon-only" name="trash-outline"></ion-icon>
                </ion-button>
            </div>
        </td>
    </tr>

    {# Barcode Modal for this product #}
    {% if barcode_enabled %}
    {% include "inventory/partials/barcode_modal.html" %}
    {% endif %}

    {% empty %}
    <tr>
        <td colspan="7">
            <div class="table-empty">
                <ion-icon name="folder-open-outline" class="table-empty-icon"></ion-icon>
                <p>{% trans "No products found" %}</p>
            </div>
        </td>
    </tr>
    {% endfor %}
</tbody>
